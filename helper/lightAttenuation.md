# 衰减

随着光线传播距离的增长逐渐削减光的强度通常叫做**衰减(Attenuation)**。

随距离减少光强度的一种方式是使用一个线性方程。

这样的方程能够随着距离的增长线性地减少光的强度，从而让远处的物体更暗。

然而，这样的线性方程通常会看起来比较假。

在现实世界中，灯在近处通常会非常亮，但随着距离的增加光源的亮度一开始会下降非常快，但在远处时剩余的光强度就会下降的非常缓慢了。

所以，我们需要一个不同的公式来减少光的强度。

----

下面这个公式根据片段距光源的距离计算了衰减值，之后我们会将它乘以光的强度向量：

在这里代表了片段距光源的距离。接下来为了计算衰减值，我们定义3个（可配置的）项：常数项、一次项和二次项。


- 常数项通常保持为1.0，它的主要作用是保证分母永远不会比1小，否则的话在某些距离上它反而会增加强度，这肯定不是我们想要的效果。
- 一次项会与距离值相乘，以线性的方式减少强度。
- 二次项会与距离的平方相乘，让光源以二次递减的方式减少强度。二次项在距离比较小的时候影响会比一次项小很多，但当距离值比较大的时候它就会比一次项更大了。


## 选择正确的值


| 距离 | 常数项 | 一次项 | 二次项 |
| -- | -- | -- | -- | -- |
| 7    | 1.0 | 0.7    | 1.8      |
| 13   | 1.0 | 0.35   | 0.44     |
| 20   | 1.0 | 0.22   | 0.20     |
| 32   | 1.0 | 0.14   | 0.07     |
| 50   | 1.0 | 0.09   | 0.032    |
| 65   | 1.0 | 0.07   | 0.017    |
| 100  | 1.0 | 0.045  | 0.0075   |
| 160  | 1.0 | 0.027  | 0.0028   |
| 200  | 1.0 | 0.022  | 0.0019   |
| 325  | 1.0 | 0.014  | 0.0007   |
| 600  | 1.0 | 0.007  | 0.0002   |
| 3250 | 1.0 | 0.0014 | 0.000007 | 
