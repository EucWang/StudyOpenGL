# 聚光

- 聚光是位于环境中某个位置的光源，它只朝一个特定方向而不是所有方向照射光线。
- 这样的结果就是只有在聚光方向的特定半径内的物体才会被照亮，其它的物体都会保持黑暗。
- 聚光很好的例子就是路灯或手电筒。

## 平滑/软化边缘

- 为了创建一种看起来边缘平滑的聚光，我们需要模拟聚光有一个内圆锥(Inner Cone)和一个外圆锥(Outer Cone)。

- 需要一个外圆锥，来让光从内圆锥逐渐减暗，直到外圆锥的边界。

- 为了创建一个外圆锥，我们只需要再定义一个余弦值来代表聚光方向向量和外圆锥向量（等于它的半径）的夹角。
 
- 然后，如果一个片段处于内外圆锥之间，将会给它计算出一个0.0到1.0之间的强度值。如果片段在内圆锥之内，它的强度就是1.0，如果在外圆锥之外强度值就是0.0。

我们可以用下面这个公式来计算这个值：

```
I= (θ − γ) / ϵ
```

这里ϵ(Epsilon)是内（ϕ）和外圆锥（γ）之间的余弦值差（ϵ=ϕ−γ）。
最终的I值就是在当前片段聚光的强度。

很难去表现这个公式是怎么工作的，所以我们用一些实例值来看看：

| θ  |	θ（角度） | 	ϕ（内光切） |	ϕ（角度）| 	γ（外光切） |	γ（角度） |	ϵ	   | I       |
| -- |      --   | --         | --      | --          | --       | --      | --      |
| 0.87	    |30	| 0.91	    | 25	        | 0.82	    | 35	| 0.91 - 0.82 = 0.09	     | 0.87 - 0.82 / 0.09 = 0.56     |
| 0.9	    |26	| 0.91	    | 25	        | 0.82	    | 35	| 0.91 - 0.82 = 0.09	     | 0.9 - 0.82 / 0.09 = 0.89      |
| 0.97	    |14	| 0.91	    | 25	        | 0.82	    | 35	| 0.91 - 0.82 = 0.09	     | 0.97 - 0.82 / 0.09 = 1.67     |
| 0.83	    |34	| 0.91	    | 25	        | 0.82	    | 35	| 0.91 - 0.82 = 0.09	     | 0.83 - 0.82 / 0.09 = 0.11     |
| 0.64	    |50	| 0.91	    | 25	        | 0.82	    | 35	| 0.91 - 0.82 = 0.09	     | 0.64 - 0.82 / 0.09 = -2.0     |
| 0.966	    |15	| 0.9978	| 12.5	        | 0.953	    | 17.5	| 0.966 - 0.953 = 0.0448     | 0.966 - 0.953 / 0.0448 = 0.29 |

- 你可以看到，我们基本是在内外余弦值之间根据θ插值。
- 如果你仍不明白发生了什么，不必担心，只需要记住这个公式就好了，在你更聪明的时候再回来看看。

